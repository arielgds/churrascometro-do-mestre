<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Churrascometro do Mestre</title>
    <style>
        /* --- ESTILO GERAL --- */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #2b2b2b;
            color: #fff;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #3d3d3d;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            border-top: 5px solid #ff5722;
        }

        h1 { color: #ff5722; margin-bottom: 10px; }
        p.intro { color: #ccc; font-style: italic; }
        
        .input-group { margin-bottom: 15px; text-align: left; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #ffcc80; }
        input, select { width: 100%; padding: 10px; border-radius: 5px; border: none; box-sizing: border-box; }

        button.btn-calcular {
            background-color: #ff5722;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            transition: background 0.3s;
        }
        button.btn-calcular:hover { background-color: #e64a19; }

        #resultado {
            margin-top: 30px; padding: 20px; background-color: #4e4e4e;
            border-radius: 10px; display: none; text-align: left;
        }

        /* --- ESTILO DO CHATBOT --- */
        /* Bot√£o Flutuante */
        .chat-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #ff5722;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 30px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            cursor: pointer;
            z-index: 1000;
        }

        /* Janela do Chat */
        .chat-window {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 300px;
            height: 400px;
            background-color: #f1f1f1;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            display: none; /* Come√ßa escondido */
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
        }

        .chat-header {
            background-color: #ff5722;
            color: white;
            padding: 10px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-body {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            color: #333;
            font-size: 14px;
            text-align: left;
        }

        .chat-footer {
            padding: 10px;
            background-color: #ddd;
            display: flex;
        }

        .chat-footer input {
            flex: 1;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .chat-footer button {
            background-color: #333;
            color: white;
            border: none;
            padding: 8px 12px;
            margin-left: 5px;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Mensagens */
        .msg { margin-bottom: 10px; padding: 8px; border-radius: 8px; max-width: 80%; }
        .msg-bot { background-color: #ffcc80; align-self: flex-start; margin-right: auto; }
        .msg-user { background-color: #fff; align-self: flex-end; margin-left: auto; border: 1px solid #ccc; }

    </style>
</head>
<body>

    <div class="container">
        <h1>üî• Churrascometro do Mestre</h1>
        <p class="intro">Fala, meu consagrado! Usa a calculadora ou chama o Bot no canto pra tirar d√∫vidas.</p>

        <div class="input-group">
            <label>Quantos Homens?</label>
            <input type="number" id="homens" placeholder="0">
        </div>
        <div class="input-group">
            <label>Quantas Mulheres?</label>
            <input type="number" id="mulheres" placeholder="0">
        </div>
        <div class="input-group">
            <label>Quantas Crian√ßas?</label>
            <input type="number" id="criancas" placeholder="0">
        </div>
        <div class="input-group">
            <label>Quantos Adultos bebem?</label>
            <input type="number" id="bebedores" placeholder="0">
        </div>
        <div class="input-group">
            <label>Dura√ß√£o?</label>
            <select id="duracao">
                <option value="padrao">Padr√£o (at√© 4h)</option>
                <option value="longo">Longo (o dia todo)</option>
            </select>
        </div>

        <button class="btn-calcular" onclick="calcularChurrasco()">Calcula a√≠, Patr√£o!</button>

        <div id="resultado"></div>
    </div>

    <button class="chat-btn" onclick="toggleChat()">üí¨</button>

    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <span>ü§ñ Bot do Mestre</span>
            <span style="cursor:pointer;" onclick="toggleChat()">X</span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="msg msg-bot">
                Fala patr√£o! Sou o assistente virtual. Digite <strong>"ponto"</strong> para saber de temperaturas ou <strong>"ajuda"</strong> para ver o que eu sei.
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" id="chatInput" placeholder="Digite aqui..." onkeypress="handleEnter(event)">
            <button onclick="enviarMensagem()">Enviar</button>
        </div>
    </div>

    <script>
        // --- C√ÅLCULO DO CHURRASCO (L√≥gica anterior) ---
        function calcularChurrasco() {
            let h = Number(document.getElementById('homens').value);
            let m = Number(document.getElementById('mulheres').value);
            let c = Number(document.getElementById('criancas').value);
            let b = Number(document.getElementById('bebedores').value);
            let duracao = document.getElementById('duracao').value;

            let carneH = (duracao === "longo") ? 0.7 : 0.5;
            let carneM = (duracao === "longo") ? 0.5 : 0.35;
            let carneC = 0.2;

            let totalCarne = (h * carneH) + (m * carneM) + (c * carneC);
            let cervejaL = b * 1.5;
            let latas = Math.ceil(cervejaL / 0.350);
            let carvao = totalCarne;

            let res = document.getElementById('resultado');
            res.style.display = "block";
            res.innerHTML = `
                <h2>üìã Lista do Patr√£o:</h2>
                <p>ü•© Carne: <strong>${totalCarne.toFixed(1)} kg</strong></p>
                <p>üç∫ Cerveja: <strong>${cervejaL.toFixed(1)} L</strong> (${latas} latas)</p>
                <p>üî• Carv√£o: <strong>${carvao.toFixed(1)} kg</strong></p>
                <hr><p><em>D√∫vida no ponto? Chama o bot ali no canto! üëâ</em></p>
            `;
        }

        // --- L√ìGICA DO CHATBOT ---
        
        // 1. Abrir e Fechar o Chat
        function toggleChat() {
            let chat = document.getElementById('chatWindow');
            if (chat.style.display === "flex") {
                chat.style.display = "none";
            } else {
                chat.style.display = "flex";
            }
        }

        // 2. Permitir enviar com "Enter"
        function handleEnter(e) {
            if (e.key === 'Enter') enviarMensagem();
        }

        // 3. Processar Mensagem
        function enviarMensagem() {
            let input = document.getElementById('chatInput');
            let textoUsuario = input.value.trim();
            if (textoUsuario === "") return;

            // Adiciona a msg do usu√°rio na tela
            addMsgNaTela(textoUsuario, 'user');
            input.value = ""; // Limpa o campo

            // Simula o bot pensando (500ms)
            setTimeout(() => {
                responderBot(textoUsuario.toLowerCase());
            }, 600);
        }

        // 4. C√©rebro do Bot (Respostas)
        function responderBot(texto) {
            let resposta = "";

            // Verifica palavras-chave
            if (texto.includes("ponto") || texto.includes("temperatura")) {
                resposta = "üå°Ô∏è <strong>Ponto da Carne:</strong><br>- Mal Passada: 50-53¬∞C<br>- Ao Ponto: 57-63¬∞C<br>- Bem Passada: 68¬∞C+<br>Tira antes que vira sola!";
            } 
            else if (texto.includes("conta") || texto.includes("calculo")) {
                resposta = "üî¢ <strong>A matem√°tica √© simples:</strong><br>- Homem: 500g (ou 700g se for longo)<br>- Mulher: 350g (ou 500g se for longo)<br>- Crian√ßa: 200g fixo.<br>Melhor sobrar que faltar!";
            }
            else if (texto.includes("carvao") || texto.includes("carv√£o")) {
                resposta = "üî• A regra de ouro √© <strong>1kg de carv√£o para cada 1kg de carne</strong>. Se o vento estiver forte, compra um saco extra!";
            }
            else if (texto.includes("ola") || texto.includes("oi")) {
                resposta = "E a√≠, meu consagrado! Manda a d√∫vida: 'ponto', 'conta' ou 'carv√£o'?";
            }
            else {
                resposta = "Xiii patr√£o, n√£o entendi. Tenta digitar: <strong>ponto</strong>, <strong>conta</strong> ou <strong>carv√£o</strong>.";
            }

            addMsgNaTela(resposta, 'bot');
        }

        // 5. Fun√ß√£o auxiliar para criar o HTML da mensagem
        function addMsgNaTela(msg, tipo) {
            let chatBody = document.getElementById('chatBody');
            let div = document.createElement('div');
            div.className = 'msg ' + (tipo === 'bot' ? 'msg-bot' : 'msg-user');
            div.innerHTML = msg;
            chatBody.appendChild(div);
            // Rola para baixo automaticamente
            chatBody.scrollTop = chatBody.scrollHeight;
        }
    </script>
</body>
</html>